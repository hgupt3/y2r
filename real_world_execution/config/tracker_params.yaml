# Configuration for Real-Time Tracker System

# Camera settings (passed to RealSense launch)
camera:
  # Color camera (RGB)
  fps: 60
  width: 640
  height: 480
  
  # Depth camera (separate settings - depth sensor has different supported resolutions)
  depth_fps: 60
  depth_width: 640
  depth_height: 480
  
  # Camera intrinsics (RealSense D435i @ 640x480)
  fx: 615.0
  fy: 615.0
  cx: 320.0
  cy: 240.0

# Visualization settings
visualization:
  mode: "3d"  # "2d" or "3d"
  
  # WebSocket server settings
  websocket_host: "0.0.0.0"
  websocket_port: 8765
  
  # Display settings
  window_name: "Real-Time Tracker"
  display_scale: 1  # Scale factor for display (1 = native camera resolution)
  trail_history_sec: 0.25  # Duration (seconds) of trajectory history to keep
  trail_alpha_floor: 0.2   # Minimum opacity for the oldest trail samples
  trajectory_color_stops:
    - [135, 8, 13]     # 0.00: dark purple
    - [162, 11, 72]    # 0.15: deep purple
    - [163, 28, 120]   # 0.30: purple-pink
    - [145, 46, 156]   # 0.45: magenta
    - [117, 69, 190]   # 0.60: red-pink
    - [84, 97, 219]    # 0.75: orange-red
    - [50, 135, 241]   # 0.90: orange
    - [33, 249, 240]   # 1.00: yellow
  trajectory_line_thickness: 2

# Perception node settings
perception:
  enabled: true
  device: "cuda"
  
  # Detection model (runs once on first frame)
  detection_model: "grounding-dino"  # "florence-2" or "grounding-dino"
  text_prompt: "small red t-shaped block."  # Object to track
  
  # Query point sampling
  num_query_points: 16  # Number of points to sample per frame
  mask_erosion_pixels: 3  # Erode mask by X pixels before sampling query points (avoid edge instability)
  sampling_strategy: "random"  # Options: "random", "fps" (farthest point sampling)
  
  # Performance
  target_fps: 0.0  # 0.0 or null = full throughput, or set to number to throttle

# Predictor node settings
predictor:
  enabled: true
  train_config_path: "/home/harsh/sam/configs/train_direct.yaml"  # Path to training config YAML (contains model+dataset params)
  checkpoint_path: "/home/harsh/sam/checkpoints/direct/2025-12-05_03-58-25/best.pth"    # Path to model checkpoint (.pth file)
  device: "cuda"
  depth_min: 0.15   # meters - clip depth before normalization
  depth_max: 2.5   # meters - clip depth before normalization 


